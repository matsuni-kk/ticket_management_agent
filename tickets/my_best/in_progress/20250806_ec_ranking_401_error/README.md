---
file_type: "ticket_summary"
ticket_id: "TKT-20250806-001"
title: "ECスペック抽出機能開発（401エラー解決済み）"
company: "My Best"
reporter: "Yuna Kamachi"
create_date: "2025-08-06"
update_date: "2025-08-11"
status: "保留"
category: "機能開発"
priority: "緊急"
assigned_to: "技術チーム"
estimated_hours: 12
related_tickets: ["TKT-20250803-003", "TKT-20250803-004"]
deadline: "2025-08-08"
business_impact: "週20本コンテンツ制作ワークフローの基盤機能"
resolution_401: "APIkey設定忘れ（解決済み）"
issued_at: "2025-08-06"
due_date: "2025-08-08"
ball_holder: "先方"
---

## 原因
- 401エラー: APIキー未設定に起因（本件は解消済み）。
- スペック抽出ワークフロー: ECサイト処理後の商品ページ処理で50〜100件のイテレーションが走り、各イテレーションの出力が肥大化（8万文字上限に抵触）。また、FireCrawlの並列実行が大きいと失敗率が上がる。

## 解決策（暫定方針）
1) 取得方式の見直し: イテレーション内のFireCrawlノードをHTTPリクエストノードに変更（安定性・柔軟性向上）。
2) フロー再設計: まずFireCrawl/HTTPでスクレイピングのみを実行→URL配列を作成→後段でLLMイテレーション（スペック抽出・口コミ抽出）に分離。
3) 並列・件数制御: 商品ページ処理の並列は5前後に制限。コードノードの `unique_urls[:N]` で次段イテレーション件数を制御（文字数上限を超えないNに調整）。
4) 出力整形: LLMイテレーションの出力をコードノードで整形し、表形式への変換を行う。

現状ステータス: 方針適用済みで通ることを確認。最適なNや並列数は運用しながらチューニング継続。

## 再発防止・運用メモ
※必要に応じて追記
