---
file_type: "response"
ticket_id: "TKT-20250820-002"
responder: "技術チーム"
response_date: "2025-08-22"
status: "解決策提示"
resolution_status: "解決済"
issued_at: "2025-08-22"
due_date: ""
ball_holder: "先方"
---

# Difyワークフロー：コード→LLM変数入力問題の解決策

## 原因
LLMノードで対象にできる変数にArray「object」が入っていないため参照できない。これはDifyの仕様上の制限で、LLMノードは特定のデータ型（Array object）を直接参照できない構造になっている。

## 解決方法
**テンプレートノードを使用した回避方法**で対応可能です。

### 実装手順：
1. **ワークフロー構成の変更**
   ```
   現在：コードノード → LLMノード
   変更後：コードノード → テンプレートノード → LLMノード
   ```

2. **テンプレートノード設定**
   ```yaml
   入力変数: array_object_variable（コードノードから）
   テンプレート設定: {{array_object_variable | json}}
   出力変数名: stringified_data
   ```

3. **LLMノード設定**
   ```yaml
   入力変数: {{stringified_data}}（テンプレートノードから）
   プロンプト: "以下のデータを処理してください：{{stringified_data}}"
   ```

### 動作原理：
- テンプレートノードがArray object型を文字列型に変換
- LLMノードは文字列型の変数を正常に参照可能
- 元のデータ構造は文字列内に保持される

## 顧客確認・検証結果
こちらの方法でArray object型の変数をLLMノードで確実に参照できるようになります。テンプレートノードは中間処理として機能し、データの整合性を保ちながら型の制限を回避します。

お試しいただき、動作確認をお願いします。追加のサポートが必要でしたらお知らせください。