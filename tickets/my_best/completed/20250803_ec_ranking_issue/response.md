---
file_type: "response"
ticket_id: "TKT-20250803-004"
responder: "技術チーム"
response_date: "2025-08-03"
status: "最終回答"
resolution_status: "解決済"
response_type: "根本原因解決"
solution_type: "設定変更・分岐条件修正"
issued_at: "2025-08-03"
due_date: ""
ball_holder: "クローズ"
---

# 解決策の提供 - EC商品順位誤認識問題

## 回答日時: 2025-08-03

## 原因の特定

頂いたフロー確認しましたところ、全ての「〜〜〜抽出」（※例：amazon抽出や楽天抽出）ノード内のプロンプトで

```
加えて、全ての要素に **"source": "amazon"** というキーと値を必ず含めてください。
```

という文言が入ってしまっております。

これがAmazon、楽天、yahoo、価格コムなど全ての抽出ノードで同一記載があるため、ここを各サイトに合わせて編集いただくとこのエラーは回避できると思われます。

## 具体的な修正方法

### 修正前（全てのノードで同じ）
```
加えて、全ての要素に **"source": "amazon"** というキーと値を必ず含めてください。
```

### 修正後（各ノードで変更）

#### Amazon抽出ノード
```
加えて、全ての要素に **"source": "amazon"** というキーと値を必ず含めてください。
```

#### 楽天抽出ノード
```
加えて、全ての要素に **"source": "rakuten"** というキーと値を必ず含めてください。
```

#### Yahoo抽出ノード
```
加えて、全ての要素に **"source": "yahoo"** というキーと値を必ず含めてください。
```

#### 価格コム抽出ノード
```
加えて、全ての要素に **"source": "kakaku"** というキーと値を必ず含めてください。
```

## 問題の根本原因

- コピー＆ペーストによる設定ミス
- 各ECサイトノードで同一のソース識別子（"amazon"）を使用
- これにより、すべての商品がAmazonからのものとして認識される

## 期待される結果

修正後は、各商品データに正しいECサイト識別子が付与され、適切にソースを識別できるようになります。

ぜひお試しください。